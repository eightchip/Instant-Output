# 管理者専用機能拡張提案

## 1. セッション管理について

### 現在の実装
- **セッション有効時間**: ブラウザのタブを閉じるまで（`sessionStorage`を使用）
- **問題点**: タブを閉じると即座に無効化される

### 改善案
- **セッション有効時間**: 24時間（`localStorage`に変更、タイムスタンプ付き）
- **自動延長**: アクティビティがある場合は自動延長
- **手動延長**: 管理者メニューから手動で延長可能

## 2. 高精度音声認識（ChatGPT Whisper API）

### 現在の問題
- Web Speech APIは英語の認識精度が低い
- スマホでの入力が不慣れな場合、音声入力が重要

### 実装案
- **Whisper API**: OpenAIのWhisper APIを使用（高精度音声認識）
- **トークン消費**: 約1分の音声で約$0.006（非常に安価）
- **使用場面**: 
  - 英語の音声入力時のみWhisper APIを使用
  - 日本語はWeb Speech APIのまま（精度が高いため）
  - 管理者がログインしている場合のみ有効

## 3. その他の管理者専用機能提案

### A. 自動翻訳の改善（低トークン）
- **現在**: 手動で翻訳ボタンを押す必要がある
- **改善**: カード追加時に自動翻訳オプション（管理者のみ）
- **トークン**: 1カードあたり約100-200トークン

### B. 文章の自動校正・改善（中トークン）
- **機能**: 英語の文章を自動で校正・改善
- **使用場面**: カード編集時、管理者が「改善」ボタンを押す
- **トークン**: 1回あたり約200-300トークン
- **プロンプト**: "Improve this English sentence for language learning, making it more natural while keeping the same meaning."

### C. 語彙の自動抽出と意味の自動取得（低トークン）
- **機能**: カードから重要単語を抽出し、意味を自動取得
- **使用場面**: カード保存時、管理者が「語彙を自動抽出」ボタンを押す
- **トークン**: 1カードあたり約150-250トークン
- **プロンプト**: "Extract 3-5 important words from this English text and provide their meanings in Japanese."

### D. 学習進捗の分析と提案（中トークン）
- **機能**: 学習データを分析し、改善提案を生成
- **使用場面**: 統計画面で「AI分析」ボタン
- **トークン**: 1回あたり約300-500トークン
- **頻度**: 週1回程度

### E. カードの自動分類・タグ付け（低トークン）
- **機能**: カードの内容から自動でタグを提案
- **使用場面**: カード保存時、管理者が「タグを自動生成」ボタンを押す
- **トークン**: 1カードあたり約100-150トークン

### F. 復習スケジュールの最適化（低トークン）
- **機能**: 学習データから最適な復習間隔を提案
- **使用場面**: 復習管理画面で「最適化」ボタン
- **トークン**: 1回あたり約200-300トークン
- **頻度**: 月1回程度

## 4. トークン消費の目安

### 1日の想定使用量（管理者1人）
- **音声認識（Whisper）**: 10分の音声 = 約$0.06
- **自動翻訳**: 10カード = 約$0.01-0.02
- **文章改善**: 5回 = 約$0.01-0.015
- **語彙抽出**: 10カード = 約$0.015-0.025
- **その他**: 約$0.01
- **合計**: 約$0.10-0.12/日（月間約$3-4）

### コスト効率の良い機能（優先実装）
1. **Whisper音声認識**（必須、スマホでの利便性が高い）
2. **自動翻訳**（頻繁に使用、トークンも少ない）
3. **語彙自動抽出**（便利、トークンも少ない）
4. **文章改善**（必要に応じて使用）

## 5. 実装優先順位

### ✅ Phase 1（実装完了）
1. ✅ セッション管理の改善（24時間有効化、自動延長機能付き）
2. ✅ Whisper API音声認識（英語のみ、管理者専用）
3. ✅ 管理者専用メニュー（ホーム画面に表示、セッション残り時間表示）

### Phase 2（高優先度・今後実装）
3. 自動翻訳オプション
4. 語彙自動抽出

### Phase 3（中優先度・今後実装）
5. 文章改善
6. タグ自動生成

### Phase 4（低優先度・今後実装）
7. 学習進捗分析
8. 復習スケジュール最適化

## 6. 実装済み機能の使い方

### セッション管理
- **有効時間**: 24時間（ブラウザを閉じても有効）
- **自動延長**: 残り12時間以下の場合、アクティビティがあると自動で24時間延長
- **手動延長**: ホーム画面の管理者メニューから「セッションを24時間延長」ボタンで延長可能

### Whisper API音声認識
- **使用条件**: 管理者がログインしている + 英語音声入力時
- **使用方法**: 
  1. 音声入力モーダルを開く
  2. 「Whisper APIを使用」にチェックを入れる
  3. 録音ボタンを押して録音開始
  4. 停止ボタンを押すと自動でWhisper APIで認識（約1-2秒かかります）
- **精度**: Web Speech APIより大幅に向上
- **コスト**: 約1分の音声で$0.006（非常に安価）
